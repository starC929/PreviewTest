import{U as k,r as f,D as me,K as fe,d as r,H as J,o as d,c as K,I as _,J as M,h as a,e,f as t,k as V,L as O,M as G,l as g,p as c,F as W,m as P,A as X,C as _e,v as ge}from"./index-BjGPYSck.js";function ve(p){return k({url:"/data/DataUploadFile/list",method:"get",params:p})}function be(p){return k({url:"/data/DataUploadFile/"+p,method:"get"})}function he(p){return k({url:"/data/DataUploadFile",method:"post",data:p})}function ye(p){return k({url:"/data/DataUploadFile",method:"put",data:p})}function De(p){return k({url:"/data/DataUploadFile/"+p,method:"delete"})}const we={class:"app-container"},Ue={class:"dialog-footer"},ke=_e({name:"DataUploadFile"}),Ie=Object.assign(ke,{setup(p){const{proxy:m}=ge(),{sys_yes_no:q,upload_file_status:B}=m.useDict("sys_yes_no","upload_file_status"),R=f([]),v=f(!1),S=f(!0),F=f(!0),C=f([]),$=f(!0),z=f(!0),N=f(0),T=f(""),Y=me({form:{},queryParams:{pageNum:1,pageSize:10,taskId:null,vin:null,fileId:null,fileName:null,isTar:null,uploadStatus:null},rules:{taskId:[{required:!0,message:"任务ID不能为空",trigger:"blur"}],vin:[{required:!0,message:"VIN不能为空",trigger:"blur"}],fileId:[{required:!0,message:"文件ID不能为空",trigger:"blur"}],fileName:[{required:!0,message:"文件名称不能为空",trigger:"blur"}],uploadStatus:[{required:!0,message:"上传状态不能为空",trigger:"change"}]}}),{queryParams:o,form:y,rules:Z}=fe(Y);function b(){S.value=!0,ve(o.value).then(i=>{R.value=i.rows,N.value=i.total,S.value=!1})}function ee(){v.value=!1,x()}function x(){y.value={id:null,taskId:null,vin:null,fileId:null,fileName:null,isTar:null,fileSize:null,fileChecksum:null,uploadPath:null,storagePath:null,uploadStatus:null,partCount:null,encryptkey:null,createBy:null,createTime:null,updateBy:null,updateTime:null},m.resetForm("DataUploadFileRef")}function D(){o.value.pageNum=1,b()}function le(){m.resetForm("queryRef"),D()}function ae(i){C.value=i.map(n=>n.id),$.value=i.length!=1,z.value=!i.length}function te(){x(),v.value=!0,T.value="添加上传文件"}function E(i){x();const n=i.id||C.value;be(n).then(w=>{y.value=w.data,v.value=!0,T.value="修改上传文件"})}function ne(){m.$refs.DataUploadFileRef.validate(i=>{i&&(y.value.id!=null?ye(y.value).then(n=>{m.$modal.msgSuccess("修改成功"),v.value=!1,b()}):he(y.value).then(n=>{m.$modal.msgSuccess("新增成功"),v.value=!1,b()}))})}function L(i){const n=i.id||C.value;m.$modal.confirm('是否确认删除上传文件编号为"'+n+'"的数据项？').then(function(){return De(n)}).then(()=>{b(),m.$modal.msgSuccess("删除成功")}).catch(()=>{})}function oe(){m.download("data/DataUploadFile/export",{...o.value},`DataUploadFile_${new Date().getTime()}.xlsx`)}return b(),(i,n)=>{const w=r("el-input"),h=r("el-form-item"),Q=r("el-option"),A=r("el-select"),s=r("el-button"),j=r("el-form"),I=r("el-col"),ue=r("right-toolbar"),ie=r("el-row"),u=r("el-table-column"),H=r("dict-tag"),re=r("el-table"),de=r("pagination"),pe=r("el-dialog"),U=J("hasPermi"),se=J("loading");return d(),K("div",we,[_(e(j,{model:a(o),ref:"queryRef",inline:!0,"label-width":"68px"},{default:t(()=>[e(h,{label:"任务ID",prop:"taskId"},{default:t(()=>[e(w,{modelValue:a(o).taskId,"onUpdate:modelValue":n[0]||(n[0]=l=>a(o).taskId=l),placeholder:"请输入任务ID",clearable:"",onKeyup:V(D,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(h,{label:"VIN",prop:"vin"},{default:t(()=>[e(w,{modelValue:a(o).vin,"onUpdate:modelValue":n[1]||(n[1]=l=>a(o).vin=l),placeholder:"请输入VIN",clearable:"",onKeyup:V(D,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(h,{label:"文件ID",prop:"fileId"},{default:t(()=>[e(w,{modelValue:a(o).fileId,"onUpdate:modelValue":n[2]||(n[2]=l=>a(o).fileId=l),placeholder:"请输入文件ID",clearable:"",onKeyup:V(D,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(h,{label:"文件名称",prop:"fileName"},{default:t(()=>[e(w,{modelValue:a(o).fileName,"onUpdate:modelValue":n[3]||(n[3]=l=>a(o).fileName=l),placeholder:"请输入文件名称",clearable:"",onKeyup:V(D,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(h,{label:"是否为tar文件",prop:"isTar"},{default:t(()=>[e(A,{modelValue:a(o).isTar,"onUpdate:modelValue":n[4]||(n[4]=l=>a(o).isTar=l),placeholder:"请选择是否为tar文件",clearable:""},{default:t(()=>[(d(!0),K(O,null,G(a(q),l=>(d(),g(Q,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(h,{label:"上传状态",prop:"uploadStatus"},{default:t(()=>[e(A,{modelValue:a(o).uploadStatus,"onUpdate:modelValue":n[5]||(n[5]=l=>a(o).uploadStatus=l),placeholder:"请选择上传状态",clearable:""},{default:t(()=>[(d(!0),K(O,null,G(a(B),l=>(d(),g(Q,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(h,null,{default:t(()=>[e(s,{type:"primary",icon:"Search",onClick:D},{default:t(()=>[c("搜索")]),_:1}),e(s,{icon:"Refresh",onClick:le},{default:t(()=>[c("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[M,a(F)]]),e(ie,{gutter:10,class:"mb8"},{default:t(()=>[e(I,{span:1.5},{default:t(()=>[_((d(),g(s,{type:"primary",plain:"",icon:"Plus",onClick:te},{default:t(()=>[c("新增")]),_:1})),[[U,["data:DataUploadFile:add"]]])]),_:1}),e(I,{span:1.5},{default:t(()=>[_((d(),g(s,{type:"success",plain:"",icon:"Edit",disabled:a($),onClick:E},{default:t(()=>[c("修改")]),_:1},8,["disabled"])),[[U,["data:DataUploadFile:edit"]]])]),_:1}),e(I,{span:1.5},{default:t(()=>[_((d(),g(s,{type:"danger",plain:"",icon:"Delete",disabled:a(z),onClick:L},{default:t(()=>[c("删除")]),_:1},8,["disabled"])),[[U,["data:DataUploadFile:remove"]]])]),_:1}),e(I,{span:1.5},{default:t(()=>[_((d(),g(s,{type:"warning",plain:"",icon:"Download",onClick:oe},{default:t(()=>[c("导出")]),_:1})),[[U,["data:DataUploadFile:export"]]])]),_:1}),e(ue,{showSearch:a(F),"onUpdate:showSearch":n[6]||(n[6]=l=>W(F)?F.value=l:null),onQueryTable:b},null,8,["showSearch"])]),_:1}),_((d(),g(re,{data:a(R),onSelectionChange:ae},{default:t(()=>[e(u,{type:"selection",width:"55",align:"center"}),e(u,{label:"序号",align:"center",prop:"id"}),e(u,{label:"任务ID",align:"center",prop:"taskId",width:"180"}),e(u,{label:"VIN",align:"center",prop:"vin",width:"180"}),e(u,{label:"文件ID",align:"center",prop:"fileId",width:"500"}),e(u,{label:"文件名称",align:"center",prop:"fileName"}),e(u,{label:"是否为tar文件",align:"center",prop:"isTar"},{default:t(l=>[e(H,{options:a(q),value:l.row.isTar},null,8,["options","value"])]),_:1}),e(u,{label:"文件大小",align:"center",prop:"fileSize"}),e(u,{label:"文件校验值",align:"center",prop:"fileChecksum",width:"180"}),e(u,{label:"上传路径",align:"center",prop:"uploadPath",width:"300"}),e(u,{label:"存储路径",align:"center",prop:"storagePath",width:"300"}),e(u,{label:"上传状态",align:"center",prop:"uploadStatus"},{default:t(l=>[e(H,{options:a(B),value:l.row.uploadStatus},null,8,["options","value"])]),_:1}),e(u,{label:"分片数量",align:"center",prop:"partCount"}),e(u,{label:"加密密钥",align:"center",prop:"encryptkey",width:"180"}),e(u,{label:"创建者",align:"center",prop:"createBy"}),e(u,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:t(l=>[P("span",null,X(i.parseTime(l.row.createTime)),1)]),_:1}),e(u,{label:"更新者",align:"center",prop:"updateBy"}),e(u,{label:"更新时间",align:"center",prop:"updateTime",width:"180"},{default:t(l=>[P("span",null,X(i.parseTime(l.row.updateTime)),1)]),_:1}),e(u,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:t(l=>[_((d(),g(s,{link:"",type:"primary",icon:"Edit",onClick:ce=>E(l.row)},{default:t(()=>[c("修改")]),_:2},1032,["onClick"])),[[U,["data:DataUploadFile:edit"]]]),_((d(),g(s,{link:"",type:"primary",icon:"Delete",onClick:ce=>L(l.row)},{default:t(()=>[c("删除")]),_:2},1032,["onClick"])),[[U,["data:DataUploadFile:remove"]]])]),_:1})]),_:1},8,["data"])),[[se,a(S)]]),_(e(de,{total:a(N),page:a(o).pageNum,"onUpdate:page":n[7]||(n[7]=l=>a(o).pageNum=l),limit:a(o).pageSize,"onUpdate:limit":n[8]||(n[8]=l=>a(o).pageSize=l),onPagination:b},null,8,["total","page","limit"]),[[M,a(N)>0]]),e(pe,{title:a(T),modelValue:a(v),"onUpdate:modelValue":n[9]||(n[9]=l=>W(v)?v.value=l:null),width:"500px","append-to-body":""},{footer:t(()=>[P("div",Ue,[e(s,{type:"primary",onClick:ne},{default:t(()=>[c("确 定")]),_:1}),e(s,{onClick:ee},{default:t(()=>[c("取 消")]),_:1})])]),default:t(()=>[e(j,{ref:"DataUploadFileRef",model:a(y),rules:a(Z),"label-width":"80px"},null,8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Ie as default};
