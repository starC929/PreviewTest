import{_ as g,V as x,r as o,X as P,Y as w,d as h,o as d,c as B,e as S,f as $,m as p,A as K,l as f,q as b,n as k}from"./index-BjGPYSck.js";const N={style:{background:"#eeeeee"}},V={class:"layout-row"},I={__name:"viewSelectPanel",setup(T){const r=x("eventBus"),s=o([{id:"1",label:"鸟瞰⻋位线检测"},{id:"2",label:"⻦瞰语义分割检测"},{id:"3",label:"camera",children:[{id:"3.1",label:"camera-front"},{id:"3.2",label:"camera-back"},{id:"3.3",label:"camera-left"},{id:"3.4",label:"camera-right"}]},{id:"4",label:"超声波信息"},{id:"5",label:"can",children:[{id:"5.1",label:"can-1"}]},{id:"6",label:"点云",disabled:!0},{id:"7",label:"map",disabled:!0}]),m=o({children:"children",label:"label"}),c=o(null);r.on("closePanel",e=>{let l=[...c.value.getCheckedKeys()],i=l.findIndex(n=>n==e.id);l.splice(i,1);let t=l.findIndex(n=>n==e.id.split(".")[0]);l.splice(t,1),c.value.setCheckedKeys(l),u(e,!1)}),P(()=>{_()});function _(){let e=["1","2"],l=w().getPlaySet().panel;l&&(e=[],l.forEach(i=>{for(let t=0;t<s.value.length;t++){s.value[t].label==i&&e.push(s.value[t].id);let n=s.value[t].children;if(n)for(let a=0;a<n.length;a++)n[a].label==i&&e.push(n[a].id)}})),c.value.setCheckedKeys(e)}function v(e){let l=e.children.slice(-1)[0],i=1;l&&(i=Number(l.id.split(".")[1])+1);const t={id:`${e.id}.${i}`,label:`${e.label}-${i}`};e.children?e.children.push(t):e.children=[t],setTimeout(()=>{let n=[...c.value.getCheckedKeys()];n.push(t.id),c.value.setCheckedKeys(n)},1)}function C(e,l){let i=l.parent.data.children,t=i.findIndex(n=>n.id==e.id);i.splice(t,1),r.emit("unCheckPanel",e)}function u(e,l){(e.id.includes(".")||!e.children||e.children.length==0)&&(l==!0?r.emit("checkPanel",e):r.emit("unCheckPanel",e))}return(e,l)=>{const i=h("el-button"),t=h("el-tree");return d(),B("div",N,[S(t,{ref_key:"refTree",ref:c,data:s.value,style:{width:"200px",background:"inherit","margin-top":"10px"},"show-checkbox":"","node-key":"id","default-expand-all":"",props:m.value,onCheckChange:u},{default:$(({node:n,data:a})=>[p("div",V,[p("span",null,K(a.label),1),a.label=="can"?(d(),f(i,{key:0,type:"primary",circle:"",plain:"",icon:"CirclePlus",class:"button-tree",onClick:b(y=>v(a),["stop"])},null,8,["onClick"])):k("",!0),n.parent.data.label=="can"?(d(),f(i,{key:1,type:"danger",circle:"",plain:"",icon:"Remove",class:"button-tree",onClick:b(y=>C(a,n),["stop"])},null,8,["onClick"])):k("",!0)])]),_:1},8,["data","props"])])}}},D=g(I,[["__scopeId","data-v-3fe5cc36"]]);export{D as default};
