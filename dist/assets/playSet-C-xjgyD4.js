import{V as I,r as i,X as L,Y as V,d as p,o as d,c as y,e as t,f as u,L as w,M as k,l as T,m as x,p as z,q as O}from"./index-BjGPYSck.js";import{d as W,c as $}from"./upload-Bs9C8lXp.js";const q=x("span",{style:{margin:"0px 20px"}},"☓",-1),A={style:{background:"rgb(245, 245, 250)",padding:"10px 10px"}},X={style:{"text-align":"center"}},K={__name:"playSet",setup(Y){let C=I("$modal");const a=i({frameRate:10,panelSizeHeight:0,panel:[],signal:[],showTree:!0,showTable:!0}),U=i([100,200,300,400,500,600,700,800]),c=i([{label:"鸟瞰⻋位线检测",value:!1},{label:"⻦瞰语义分割检测",value:!1},{label:"camera-front",value:!1},{label:"camera-back",value:!1},{label:"camera-left",value:!1},{label:"camera-right",value:!1},{label:"超声波信息",value:!1},{label:"can-1",value:!1},{label:"点云",value:!1},{label:"map",value:!1}]),D=i([]),m=i(""),f=i(""),v=i([]);L(()=>{if(B(),V().getPlaySet()&&(a.value=V().getPlaySet(),a.value.panel.forEach(e=>{let s=c.value.findIndex(n=>n.label==e);s!=-1&&(c.value[s].value=!0)}),a.value.signal))for(var o in a.value.signal){let e={};e.defaultSigMsg=a.value.signal[o][0]+"/"+a.value.signal[o][1],v.value.push(e)}});function E(o){a.value.panelSizeHeight=o*.6}function M(){let o=[];c.value.forEach(e=>{e.value==!0&&o.push(e.label)}),a.value.panel=o}function H(){let o={},e=[];e.push(m.value),e.push(f.value),o.defaultSigMsg=e[0]+"/"+e[1],v.value.push(o),console.log("tempSig",e),a.value.signal.push(e),m.value="",f.value=""}function N(){V().setPlaySet(a.value),C.msgSuccess("保存成功")}function R(o){o!==-1&&(v.value.splice(o,1),a.value.signal.splice(o,1))}async function B(){try{(await W()).data.forEach(async e=>{let s={value:e,label:e,disabled:!1,children:[]};if(e=="EgoVehicleCanInfo")try{let{data:n}=await $(e);Object.keys(n[0].data).forEach(async r=>{if(r!=="stamp"&&r!=="seq"){let g={value:r,label:r};s.children.push(g)}})}catch(n){console.error("There was an error in getTopicData!",n)}D.value.push(s)})}catch(o){console.error("There was an error in getTopic!",o)}}return(o,e)=>{const s=p("el-input"),n=p("el-form-item"),b=p("el-checkbox"),r=p("el-option"),g=p("el-select"),h=p("el-button"),_=p("el-table-column"),P=p("el-table"),j=p("el-form");return d(),y("div",null,[t(j,{modelValue:a.value,"onUpdate:modelValue":e[7]||(e[7]=l=>a.value=l),"label-width":"160px"},{default:u(()=>[t(n,{label:"帧率",prop:"frameRate"},{default:u(()=>[t(s,{modelValue:a.value.frameRate,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.frameRate=l),style:{width:"200px"}},null,8,["modelValue"])]),_:1}),t(n,{prop:"showTree",label:"默认显示左侧导航"},{default:u(()=>[t(b,{modelValue:a.value.showTree,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.showTree=l)},null,8,["modelValue"])]),_:1}),t(n,{prop:"showTable",label:"默认显示右侧标签列表"},{default:u(()=>[t(b,{modelValue:a.value.showTable,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.showTable=l)},null,8,["modelValue"])]),_:1}),t(n,{label:"面板宽高",prop:"panelSizeWidth"},{default:u(()=>[t(g,{modelValue:a.value.panelSizeWidth,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.panelSizeWidth=l),onChange:E,placeholder:"宽",style:{width:"80px"}},{default:u(()=>[(d(!0),y(w,null,k(U.value,l=>(d(),T(r,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),q,t(s,{modelValue:a.value.panelSizeHeight,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.panelSizeHeight=l),style:{width:"80px"},disabled:""},null,8,["modelValue"])]),_:1}),t(n,{label:"默认显示面板",prop:"panel"},{default:u(()=>[x("div",A,[(d(!0),y(w,null,k(c.value,(l,S)=>(d(),T(b,{modelValue:l.value,"onUpdate:modelValue":F=>l.value=F,onChange:M,key:S,label:l.label},null,8,["modelValue","onUpdate:modelValue","label"]))),128))])]),_:1}),t(n,{label:"默认显示信号手动输入",prop:"signalInput"},{default:u(()=>[t(s,{modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=l=>m.value=l),style:{width:"200px"},placeholder:"输入topic"},null,8,["modelValue"]),t(s,{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=l=>f.value=l),style:{width:"200px","margin-left":"10px"},placeholder:"输入signal"},null,8,["modelValue"]),t(h,{type:"primary",style:{"margin-left":"10px"},onClick:H},{default:u(()=>[z("添加")]),_:1}),t(P,{ref:"multipleTableRef",data:v.value,style:{"margin-top":"20px"},"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}},{default:u(()=>[t(_,{type:"index",label:"编号"}),t(_,{prop:"defaultSigMsg",label:"默认显示信号"}),t(_,{fixed:"right",label:"操作"},{default:u(l=>[t(h,{icon:"Delete",style:{border:"none",color:"#f56c6c","font-size":"15px"},size:"small",onClick:O(S=>R(l.$index),["stop"])},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),x("div",X,[t(h,{type:"primary",onClick:N},{default:u(()=>[z("保存")]),_:1})])]),_:1},8,["modelValue"])])}}};export{K as default};
