import{U as N,r as b,D as te,K as oe,d as s,H as B,o as V,c as ne,I as g,J as P,h as a,e,f as o,k as v,p as f,l as h,F as E,m as ue,C as de,v as re}from"./index-BjGPYSck.js";function ie(m){return N({url:"/data/SysUploadTask/list",method:"get",params:m})}function pe(m){return N({url:"/data/SysUploadTask/"+m,method:"get"})}function se(m){return N({url:"/data/SysUploadTask",method:"post",data:m})}function me(m){return N({url:"/data/SysUploadTask",method:"put",data:m})}function ce(m){return N({url:"/data/SysUploadTask/"+m,method:"delete"})}const fe={class:"app-container"},be={class:"dialog-footer"},ge=de({name:"SysUploadTask"}),ke=Object.assign(ge,{setup(m){const{proxy:y}=re(),q=b([]),k=b(!1),I=b(!0),T=b(!0),w=b([]),D=b(!0),Z=b(!0),K=b(0),C=b(""),F=te({form:{},queryParams:{pageNum:1,pageSize:10,uploadId:null,fileIdentifier:null,fileName:null,isZip:null,uploadStatus:null,bucketName:null,objectKey:null,totalSize:null,chunkSize:null,chunkNum:null},rules:{uploadId:[{required:!0,message:"分片上传Id不能为空",trigger:"blur"}],fileIdentifier:[{required:!0,message:"文件唯一标识不能为空",trigger:"blur"}],fileName:[{required:!0,message:"文件名不能为空",trigger:"blur"}],bucketName:[{required:!0,message:"所属桶名不能为空",trigger:"blur"}],objectKey:[{required:!0,message:"文件的key不能为空",trigger:"blur"}],totalSize:[{required:!0,message:"文件大小不能为空",trigger:"blur"}],chunkSize:[{required:!0,message:"每个分片大小不能为空",trigger:"blur"}],chunkNum:[{required:!0,message:"分片数量不能为空",trigger:"blur"}]}}),{queryParams:u,form:n,rules:Q}=oe(F);function S(){I.value=!0,ie(u.value).then(p=>{q.value=p.rows,K.value=p.total,I.value=!1})}function L(){k.value=!1,x()}function x(){n.value={id:null,uploadId:null,fileIdentifier:null,fileName:null,isZip:null,uploadStatus:null,bucketName:null,objectKey:null,totalSize:null,chunkSize:null,chunkNum:null,createBy:null,createTime:null,updateBy:null,updateTime:null},y.resetForm("sysUploadTaskRef")}function _(){u.value.pageNum=1,S()}function A(){y.resetForm("queryRef"),_()}function H(p){w.value=p.map(l=>l.id),D.value=p.length!=1,Z.value=!p.length}function J(){x(),k.value=!0,C.value="添加前端上传文件任务"}function j(p){x();const l=p.id||w.value;pe(l).then(d=>{n.value=d.data,k.value=!0,C.value="修改前端上传文件任务"})}function O(){y.$refs.sysUploadTaskRef.validate(p=>{p&&(n.value.id!=null?me(n.value).then(l=>{y.$modal.msgSuccess("修改成功"),k.value=!1,S()}):se(n.value).then(l=>{y.$modal.msgSuccess("新增成功"),k.value=!1,S()}))})}function R(p){const l=p.id||w.value;y.$modal.confirm('是否确认删除前端上传文件任务编号为"'+l+'"的数据项？').then(function(){return ce(l)}).then(()=>{S(),y.$modal.msgSuccess("删除成功")}).catch(()=>{})}function G(){y.download("data/sysUploadTask/export",{...u.value},`sysUploadTask_${new Date().getTime()}.xlsx`)}return S(),(p,l)=>{const d=s("el-input"),r=s("el-form-item"),c=s("el-button"),$=s("el-form"),z=s("el-col"),M=s("right-toolbar"),W=s("el-row"),i=s("el-table-column"),X=s("el-table"),Y=s("pagination"),ee=s("el-dialog"),U=B("hasPermi"),le=B("loading");return V(),ne("div",fe,[g(e($,{model:a(u),ref:"queryRef",inline:!0,"label-width":"68px"},{default:o(()=>[e(r,{label:"分片上传Id",prop:"uploadId"},{default:o(()=>[e(d,{modelValue:a(u).uploadId,"onUpdate:modelValue":l[0]||(l[0]=t=>a(u).uploadId=t),placeholder:"请输入分片上传Id",clearable:"",onKeyup:v(_,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(r,{label:"是否为zip文件",prop:"isZip"},{default:o(()=>[e(d,{modelValue:a(u).isZip,"onUpdate:modelValue":l[1]||(l[1]=t=>a(u).isZip=t),placeholder:"请输入是否为zip文件",clearable:"",onKeyup:v(_,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(r,{label:"所属桶名",prop:"bucketName"},{default:o(()=>[e(d,{modelValue:a(u).bucketName,"onUpdate:modelValue":l[2]||(l[2]=t=>a(u).bucketName=t),placeholder:"请输入所属桶名",clearable:"",onKeyup:v(_,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(r,{label:"文件大小",prop:"totalSize"},{default:o(()=>[e(d,{modelValue:a(u).totalSize,"onUpdate:modelValue":l[3]||(l[3]=t=>a(u).totalSize=t),placeholder:"请输入文件大小",clearable:"",onKeyup:v(_,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(r,{label:"每个分片大小",prop:"chunkSize"},{default:o(()=>[e(d,{modelValue:a(u).chunkSize,"onUpdate:modelValue":l[4]||(l[4]=t=>a(u).chunkSize=t),placeholder:"请输入每个分片大小",clearable:"",onKeyup:v(_,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(r,{label:"分片数量",prop:"chunkNum"},{default:o(()=>[e(d,{modelValue:a(u).chunkNum,"onUpdate:modelValue":l[5]||(l[5]=t=>a(u).chunkNum=t),placeholder:"请输入分片数量",clearable:"",onKeyup:v(_,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(r,null,{default:o(()=>[e(c,{type:"primary",icon:"Search",onClick:_},{default:o(()=>[f("搜索")]),_:1}),e(c,{icon:"Refresh",onClick:A},{default:o(()=>[f("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[P,a(T)]]),e(W,{gutter:10,class:"mb8"},{default:o(()=>[e(z,{span:1.5},{default:o(()=>[g((V(),h(c,{type:"primary",plain:"",icon:"Plus",onClick:J},{default:o(()=>[f("新增")]),_:1})),[[U,["data:sysUploadTask:add"]]])]),_:1}),e(z,{span:1.5},{default:o(()=>[g((V(),h(c,{type:"success",plain:"",icon:"Edit",disabled:a(D),onClick:j},{default:o(()=>[f("修改")]),_:1},8,["disabled"])),[[U,["data:sysUploadTask:edit"]]])]),_:1}),e(z,{span:1.5},{default:o(()=>[g((V(),h(c,{type:"danger",plain:"",icon:"Delete",disabled:a(Z),onClick:R},{default:o(()=>[f("删除")]),_:1},8,["disabled"])),[[U,["data:sysUploadTask:remove"]]])]),_:1}),e(z,{span:1.5},{default:o(()=>[g((V(),h(c,{type:"warning",plain:"",icon:"Download",onClick:G},{default:o(()=>[f("导出")]),_:1})),[[U,["data:sysUploadTask:export"]]])]),_:1}),e(M,{showSearch:a(T),"onUpdate:showSearch":l[6]||(l[6]=t=>E(T)?T.value=t:null),onQueryTable:S},null,8,["showSearch"])]),_:1}),g((V(),h(X,{data:a(q),onSelectionChange:H},{default:o(()=>[e(i,{type:"selection",width:"55",align:"center"}),e(i,{label:"表ID",align:"center",prop:"id"}),e(i,{label:"分片上传Id",align:"center",prop:"uploadId"}),e(i,{label:"文件唯一标识",align:"center",prop:"fileIdentifier"}),e(i,{label:"文件名",align:"center",prop:"fileName"}),e(i,{label:"是否为zip文件",align:"center",prop:"isZip"}),e(i,{label:"上传状态",align:"center",prop:"uploadStatus"}),e(i,{label:"所属桶名",align:"center",prop:"bucketName"}),e(i,{label:"文件的key",align:"center",prop:"objectKey"}),e(i,{label:"文件大小",align:"center",prop:"totalSize"}),e(i,{label:"每个分片大小",align:"center",prop:"chunkSize"}),e(i,{label:"分片数量",align:"center",prop:"chunkNum"}),e(i,{label:"时间",align:"center",prop:"createTime",sortable:""}),e(i,{label:"上传者",align:"center",prop:"createBy",sortable:""}),e(i,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:o(t=>[g((V(),h(c,{link:"",type:"primary",icon:"Edit",onClick:ae=>j(t.row)},{default:o(()=>[f("修改")]),_:2},1032,["onClick"])),[[U,["data:sysUploadTask:edit"]]]),g((V(),h(c,{link:"",type:"primary",icon:"Delete",onClick:ae=>R(t.row)},{default:o(()=>[f("删除")]),_:2},1032,["onClick"])),[[U,["data:sysUploadTask:remove"]]])]),_:1})]),_:1},8,["data"])),[[le,a(I)]]),g(e(Y,{total:a(K),page:a(u).pageNum,"onUpdate:page":l[7]||(l[7]=t=>a(u).pageNum=t),limit:a(u).pageSize,"onUpdate:limit":l[8]||(l[8]=t=>a(u).pageSize=t),onPagination:S},null,8,["total","page","limit"]),[[P,a(K)>0]]),e(ee,{title:a(C),modelValue:a(k),"onUpdate:modelValue":l[18]||(l[18]=t=>E(k)?k.value=t:null),width:"500px","append-to-body":""},{footer:o(()=>[ue("div",be,[e(c,{type:"primary",onClick:O},{default:o(()=>[f("确 定")]),_:1}),e(c,{onClick:L},{default:o(()=>[f("取 消")]),_:1})])]),default:o(()=>[e($,{ref:"sysUploadTaskRef",model:a(n),rules:a(Q),"label-width":"80px"},{default:o(()=>[e(r,{label:"分片上传Id",prop:"uploadId"},{default:o(()=>[e(d,{modelValue:a(n).uploadId,"onUpdate:modelValue":l[9]||(l[9]=t=>a(n).uploadId=t),placeholder:"请输入分片上传Id"},null,8,["modelValue"])]),_:1}),e(r,{label:"文件唯一标识",prop:"fileIdentifier"},{default:o(()=>[e(d,{modelValue:a(n).fileIdentifier,"onUpdate:modelValue":l[10]||(l[10]=t=>a(n).fileIdentifier=t),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1}),e(r,{label:"文件名",prop:"fileName"},{default:o(()=>[e(d,{modelValue:a(n).fileName,"onUpdate:modelValue":l[11]||(l[11]=t=>a(n).fileName=t),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1}),e(r,{label:"是否为zip文件",prop:"isZip"},{default:o(()=>[e(d,{modelValue:a(n).isZip,"onUpdate:modelValue":l[12]||(l[12]=t=>a(n).isZip=t),placeholder:"请输入是否为zip文件"},null,8,["modelValue"])]),_:1}),e(r,{label:"所属桶名",prop:"bucketName"},{default:o(()=>[e(d,{modelValue:a(n).bucketName,"onUpdate:modelValue":l[13]||(l[13]=t=>a(n).bucketName=t),placeholder:"请输入所属桶名"},null,8,["modelValue"])]),_:1}),e(r,{label:"文件的key",prop:"objectKey"},{default:o(()=>[e(d,{modelValue:a(n).objectKey,"onUpdate:modelValue":l[14]||(l[14]=t=>a(n).objectKey=t),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1}),e(r,{label:"文件大小",prop:"totalSize"},{default:o(()=>[e(d,{modelValue:a(n).totalSize,"onUpdate:modelValue":l[15]||(l[15]=t=>a(n).totalSize=t),placeholder:"请输入文件大小"},null,8,["modelValue"])]),_:1}),e(r,{label:"每个分片大小",prop:"chunkSize"},{default:o(()=>[e(d,{modelValue:a(n).chunkSize,"onUpdate:modelValue":l[16]||(l[16]=t=>a(n).chunkSize=t),placeholder:"请输入每个分片大小"},null,8,["modelValue"])]),_:1}),e(r,{label:"分片数量",prop:"chunkNum"},{default:o(()=>[e(d,{modelValue:a(n).chunkNum,"onUpdate:modelValue":l[17]||(l[17]=t=>a(n).chunkNum=t),placeholder:"请输入分片数量"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{ke as default};
